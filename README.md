# gruppe9
Webutviklingoppgave for gruppe 9
## Start server

Install dependencies and start server:

```sh
cd server
npm install
npm start
```

### Run server tests:

```sh
npm test
```

## Bundle client files to be served through server

Install dependencies and bundle client files:

```sh
cd client
npm install
npm start
```

### Server API

### Endpoints

#### 1. Get All Questions
```
GET /sporsmal
```
- **Description**: Retrieves a list of all questions.
- **Response**: An array of question objects.
```json
[
  {
    "sporsmalid": 1,
    "tittel": "Question Title",
    "innhold": "Question Content",
    "poeng": 10,
    "dato": "YYYY-MM-DDTHH:mm:ss.sssZ",
    "sistendret": "YYYY-MM-DDTHH:mm:ss.sssZ"
  },
  // ...more questions
]
```

#### 2. Get a Question by ID
```
GET /sporsmal/:id
```
- **Description**: Retrieves a question by its ID.
- **Parameters**: `id` (integer) - Question ID.
- **Response**: A question object or 404 Not Found if the question does not exist.
```json
{
  "sporsmalid": 1,
  "tittel": "Question Title",
  "innhold": "Question Content",
  "poeng": 10,
  "dato": "YYYY-MM-DDTHH:mm:ss.sssZ",
  "sistendret": "YYYY-MM-DDTHH:mm:ss.sssZ"
}
```

#### 3. Create a New Question
```
POST /sporsmal
```
- **Description**: Creates a new question. ID is automatically generated by the database.
- **Request Body**:
```json
{
  "sporsmal": {
    "tittel": "Question Title",
    "innhold": "Question Content",
    "poeng": 10,
    "dato": "YYYY-MM-DDTHH:mm:ss.sssZ",
    "sistendret": "YYYY-MM-DDTHH:mm:ss.sssZ"
  }
}
```
- **Response**: The ID of the newly created question.
```json
{
  "id": 1
}
```

#### 4. Update a Question
```
PUT /sporsmal
```
- **Description**: Updates an existing question. Every update automatically updates the `sistendret` field.
- **Request Body**:
```json
{
  "sporsmal": {
    "sporsmalid": 1,
    "tittel": "Updated Question Title",
    "innhold": "Updated Question Content",
    "poeng": 15
  }
}
```
- **Response**: 200 OK if the question is updated successfully, or 400 Bad Request if the request is malformed.

#### 5. Delete a Question
```
DELETE /sporsmal/:id
```
- **Description**: Deletes a question by its ID and all associated answers.
- **Parameters**: `id` (integer) - Question ID.
- **Response**: 200 OK if the question is deleted successfully, or 404 Not Found if the question does not exist.

### Error Handling
- If the server encounters an error while processing a request, it will respond with a 500 Internal Server Error and an error message describing the issue.
- Malformed requests will receive a 400 Bad Request response with an error message indicating the problem.

### Notes
- Deleting a question will also delete all associated answers.
- Dates (`dato` and `sistendret`) should be provided in ISO 8601 format (`YYYY-MM-DDTHH:mm:ss.sssZ`).


## API Documentation: Svar (Answers) Service

### Endpoints

#### 1. Get All Answers for a Question
```
GET /sporsmal/:sporsmalid/svar
```
- **Description**: Retrieves all answers for a specific question.
- **Parameters**: `sporsmalid` (integer) - Question ID.
- **Response**: An array of answer objects.
```json
[
  {
    "svarid": 1,
    "svartekst": "Answer Text",
    "poeng": 5,
    "sporsmalid": 1,
    "erbest": true,
    "dato": "YYYY-MM-DDTHH:mm:ss.sssZ",
    "sistendret": "YYYY-MM-DDTHH:mm:ss.sssZ",
    "ersvar": true,
    "svarsvarid": 2
  },
  // ...more answers
]
```

#### 2. Get an Answer by ID
```
GET /sporsmal/:sporsmalid/svar/:svarid
```
- **Description**: Retrieves an answer by its ID and the associated question ID.
- **Parameters**: `sporsmalid` (integer) - Question ID, `svarid` (integer) - Answer ID.
- **Response**: An answer object or 404 Not Found if the answer does not exist.
```json
{
  "svarid": 1,
  "svartekst": "Answer Text",
  "poeng": 5,
  "sporsmalid": 1,
  "erbest": true,
  "dato": "YYYY-MM-DDTHH:mm:ss.sssZ",
  "sistendret": "YYYY-MM-DDTHH:mm:ss.sssZ",
  "ersvar": true,
  "svarsvarid": 2
}
```

#### 3. Create a New Answer for a Question
```
POST /sporsmal/:sporsmalid/svar
```
- **Description**: Creates a new answer for a specific question. ID is automatically generated by the database.
- **Parameters**: `sporsmalid` (integer) - Question ID.
- **Request Body**:
```json
{
  "svar": {
    "svartekst": "Answer Text",
    "poeng": 5,
    "erbest": true,
    "ersvar": false,
    "svarsvarid": null,
    "dato": "YYYY-MM-DDTHH:mm:ss.sssZ",
    "sistendret": "YYYY-MM-DDTHH:mm:ss.sssZ"
  }
}
```
- **Response**: The ID of the newly created answer.
```json
{
  "id": 1
}
```

#### 4. Update an Answer for a Question
```
PUT /sporsmal/:sporsmalid/svar/:svarid
```
- **Description**: Updates an existing answer for a specific question. Every update automatically updates the `sistendret` field.
- **Parameters**: `sporsmalid` (integer) - Question ID, `svarid` (integer) - Answer ID.
- **Request Body**:
```json
{
  "svar": {
    "svartekst": "Updated Answer Text",
    "poeng": 8,
    "erbest": true,
    "ersvar": false,
    "svarsvarid": null
  }
}
```
- **Response**: 200 OK if the answer is updated successfully, or 400 Bad Request if the request is malformed.

#### 5. Delete an Answer for a Question
```
DELETE /sporsmal/:sporsmalid/svar/:svarid
```
- **Description**: Deletes an answer by its ID and the associated question ID.
- **Parameters**: `sporsmalid` (integer) - Question ID, `svarid` (integer) - Answer ID.
- **Response**: 200 OK if the answer is deleted successfully, or 404 Not Found if the answer does not exist.

### Error Handling
- If the server encounters an error while processing a request, it will respond with a 500 Internal Server Error and an error message describing the issue.
- Malformed requests will receive a 400 Bad Request response with an error message indicating the problem.

### Notes
- Dates (`dato` and `sistendret`) should be provided in ISO 8601 format (`YYYY-MM-DDTHH:mm:ss.sssZ`).
- `ersvar` indicates whether the answer is a response to another answer (true) or a direct response to the question (false).
- If `ersvar` is true, `svarsvarid` should contain the ID of the answer to which it is responding. If `ersvar` is false, `svarsvarid` should be null.

Feel free to reach out if you have any questions or issues using the Svar Service API.